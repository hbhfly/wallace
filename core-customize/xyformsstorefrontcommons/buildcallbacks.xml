<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
 Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.
-->
<project name="xyformsstorefrontcommons_buildcallbacks">

   <target name="install.xyformsstorefrontcommons" description="Installing the xyformsstorefrontcommons AddOn">
       <sequential>
           <xyformsstorefrontcommons_install_addons />
           <xyformsstorefrontcommons_copy_orbeon_config />
       </sequential>
   </target>
   <macrodef name="xyformsstorefrontcommons_install_addons">
       <sequential>
           <property file="${ext.xyformsstorefrontcommons.path}/addons.properties"  />
           <echo level="info" message="installing FS AddOns : ${xyformsstorefrontcommons.addons} for ${addonStorefront}" />
           <antcall target="addoninstall" >
               <param name="addonnames" value="${xyformsstorefrontcommons.addons}" />
               <param name="addonStorefront.yacceleratorstorefront" value="${addonStorefront}" />
           </antcall>
       </sequential>
   </macrodef>

    <macrodef name="xyformsstorefrontcommons_copy_orbeon_config">
        <sequential>
         <echo level="info" message="copy orbeon config to hybris config dir..."/>
         <copy todir="${HYBRIS_CONFIG_DIR}/orbeon" overwrite="true" verbose="true" filtering="false">
            <fileset dir="${ext.xyformsstorefrontcommons.path}/orbeon/resources">
               <include name="**/**.*" />
               <exclude name="**/properties-*.xml" />
            </fileset>
         </copy>
         <copy todir="${HYBRIS_CONFIG_DIR}/orbeon" overwrite="true" verbose="true" filtering="true">
             <filterset begintoken="${" endtoken="}" recurse="true">
                <filtersfile file="${ext.xyformsstorefrontcommons.path}/project.properties" />
                <filtersfile file="${ext.yacceleratorstorefront.path}/project.properties" />
                <filtersfile file="project.properties"/> 
                <filtersfile file="${HYBRIS_CONFIG_DIR}/local.properties"/>
             </filterset>
            <fileset dir="${ext.xyformsstorefrontcommons.path}/orbeon/resources">
               <include name="**/properties-*.xml" />
            </fileset>
         </copy>
         <copy file="${ext.xyformsstorefrontcommons.path}/project.properties"
               tofile="${ext.xyformsstorefrontcommons.path}/project.storefront.properties"
               overwrite="true" verbose="true" filtering="false" />
        </sequential>
    </macrodef>

	

	<!-- deprecated installer tasks -->

</project>
